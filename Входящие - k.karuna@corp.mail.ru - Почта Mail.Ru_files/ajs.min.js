void function(){"use strict";function v(a){var b=null,p,f,c=a.length,j,d=[];for(p=0;p<c;++p)if((j=a[p])&&j.ajs&&j instanceof s){b=0;for(f=j.length;b<f;++b)d.push(j[b])}else"string"===typeof j&&(j=g.createTextNode(j)),j.nodeType&&d.push(j);if(1===(c=d.length))b=d[0];else{b=g.createDocumentFragment();for(p=0;p<c;++p)b.appendChild(d[p])}return b}function n(a,b,p,f,j){if((j=String(j||""))&&a.test(j))for(a=7;a--;)~j.indexOf(this[a+b])&&(j=j.replace(this[a+p],this[a+f]));return j}function k(a,b){var p=0,f="length"in
this&&!("nodeType"in this)&&this.length||0,c=f&&this[0]||this,d,h,g;b=b.replace(x," ").split(j);g=I&&(2===I||1===b.length?2:1);do{if(c)if(l(c)&&g&&"string"==typeof a)c=c.classList,2===g?c[a].apply(c,b):Array.forEach(b,c[a].bind(c));else if("string"===typeof(d=c[w]))(h=d.length)?(d=(" "+d+" ").replace(x),h=d.length,d=Array.reduce(b,a,d)+""):d=b.join(" "),h!==d.length&&(c[w]=d.trim());c=p++<f?this[p]:null}while(c);return this}function A(a,b){return l(b)&&Array.every(a,I?b.classList.contains.bind(b.classList):
ga.bind(null,(" "+b[w]+" ").replace(x," ")))}function l(a){return a&&1===a.nodeType}function e(){this.cancelBubble=!0}function t(){this.returnValue=!1}function C(a,b,p){p=p||d.event;p.__fixed||(p.target||(p.target=p.srcElement||g),3===p.target.nodeType&&(p.target=p.target.parentNode),p.currentTarget||(p.currentTarget=b),!p.relatedTarget&&p.fromElement&&(p.relatedTarget=p.fromElement===p.target?p.toElement:p.fromElement),p.stopPropagation||(p.stopPropagation=e),p.preventDefault||(p.preventDefault=
t),!p.which&&"button"in p&&(p.which=p.button&1?1:p.button&2?3:p.button&4?2:0),p.__fixed=!0);return a.call(this,p)}function q(a,b,p,f){p=p.split(j);var c=0,d,h="length"in a&&!("nodeType"in a)&&a.length||0,g=h&&a[0]||a,m=p.length,x,w,z;if(g){do{if(Object.isObject(g)&&g[X])for(d=0;d<m;d++)x=p[d],r||(g[J]=g[J]||s.gid++,f[J]=f[J]||s.gid++,x="on"+x,w=g[J]+"_"+x+"_"+f[J],z=null,"object"===typeof f&&(z=f,f=s.__processHandler(f)),f=Y[w]=Y[w]||C.bind(z||g,f,g)),g[b?X:B](x,f,!1);g=c++<h?a[c]:null}while(g)}return a}
function c(a,b){if(void 0!==b){var p={};p[a]=b;return p}return a}function m(a,f){for(var p,c=[],d=0,h=a.length,x=f.indexOf(" "),w=(~x?f.substr(0,x):f).replace(j),r,e;d<h;d++)p=a[d],~x&&Z?p=p.querySelectorAll(f):(e=w.substr(1),r=w.charAt(0),"#"===r?p=(p=g[D](e))?[p]:[]:"."===r?p=ha(e.replace(b," "),p):(r=w.split("."),p=p[z](r[0]),p=H(w,".")?F(p,null,r.slice(1)):Array.from(p))),p.length&&(~x&&!Z&&(p=m(p,f.substr(x+1))),c=c.concat(G.call(p,0)));return c}function F(a,f,p){var c=[],d=0,h=a.length,g;f&&
(f=f.toUpperCase());for(p&&"string"==typeof p&&(p=p.replace(b," ").split(j));d<h;d++)g=a[d],l(g)&&((!f||f==g.tagName.toUpperCase())&&(!p||A(p,g)))&&c.push(g);return c}Function.prototype.bind||(Function.prototype.bind=function(a){var b=G.call(arguments,1),p=this;return function(){return p.apply(a,b.concat(G.call(arguments,0)))}});var d=this,g=d.document,h="attachEvent"in g&&"all"in g&&"uniqueID"in g.documentElement&&+((/msie (\d+)/i.exec(navigator.userAgent)||[])[1]||0)||null,a=d.ajs||(d.ajs={}),b=
/\./g,f=/^\d+/,j=/\s+/,x=/[\r\n\t]/g,w="className",D="getElementById",z="getElementsByTagName",Y={},r="addEventListener"in g,X=r?"addEventListener":"attachEvent",B=r?"removeEventListener":"detachEvent",Z=!!g.querySelectorAll,y={fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},u=Array.prototype,G=u.slice,$=u.forEach,K=u.filter,L=u.reduce,M=u.every,aa=u.some,ia=/^\s+/,ja=/\s/,ka="a"!=Object("a")[0]||!(0 in Object("a")),O=function(a,b){if(null==a&&!b)throw new TypeError;
return ka&&"string"==typeof a&&a?String.prototype.split.call(a,""):Object(a)},la=String.prototype.trim||function(){for(var a=this.replace(ia,""),b=a.length;ja.test(a.charAt(--b)););return a.slice(0,b+1)},H,u="\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",ba,ca,ma=Function.prototype.apply,S=Function.prototype.call,T=function(a,b,p){return ma.call(a,b,G.call(arguments,2))},N=S.bind(Object.prototype.hasOwnProperty),
E;if(E="classList"in g.documentElement)E=g.createElement("b"),E.classList.add(1,2),E=E.classList.contains(2)?2:1;var I=E,da,ea,P=("_"+Math.random()).substr(3,6),J="uuid"+P,U=Object.prototype.toString,V;String.prototype.contains||(String.prototype.contains=function(a,b){return!!~String(this).indexOf(a,b|0)});H=S.bind(String.prototype.contains);Object.create||(Object.create=function(a){var b;null===a?b={__proto__:null}:(b=function(){},b.prototype=a,b=new b,b.__proto__=a);return b});if(!Object.keys){E=
Object;var Q="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),na=!{toString:null}.propertyIsEnumerable(Q[0]),oa=Q.length;E.keys=function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on a non-object");var b=[],p;for(p in a)N(a,p)&&b.push(p);if(na)for(p=0;p<oa;p++)N(a,Q[p])&&b.push(Q[p]);return b}}Object.isObject=function(a){var b;return!!a&&("object"===(b=typeof a)||"function"===b)};Object.isPlainObject=
function(a){return!!a&&"[object Object]"===U.call(a)&&("function"===typeof a.constructor&&"[object Function]"===U.call(a.constructor)||null===a.__proto__)&&!N(a,"callee")};Object.forEach||(Object.forEach=function(a,b,p){if("function"!==typeof b)throw new TypeError(b+" is not a function");var f;if(a)for(f in a)if(N(a,f)&&!1===b.call(p,a[f],f,a))break});if(!String.prototype.trim||u.trim())u="["+u+"]",ba=RegExp("^"+u+u+"*"),ca=RegExp(u+u+"*$"),String.prototype.trim=function(){return String(this).replace(ba,
"").replace(ca,"")};Function.prototype.throttle||(Function.prototype.throttle=function(a,b){var p=this,f,c;return function(){var d;c=arguments;f||(d=function(){f=null;c&&(p.apply(this,c),c=null,f=setTimeout(d,a))}.bind(b||this),d())}});Function.prototype.debounce||(Function.prototype.debounce=function(a,b){var f=this,c;return function(){clearTimeout(c);c=setTimeout(function(a){f.apply(this,a)}.bind(b||this,arguments),a)}});Number.isNumber||(Number.isNumber=function(a){return!d.isNaN(d.parseFloat(a))&&
d.isFinite(a)});Number.isNumeric=function(a){return!d.isNaN(d.parseFloat(a))&&d.isFinite(a)};Number.isFinite||(Number.isFinite=function(a){return"number"===typeof a&&d.isFinite(a)});Number.isInteger||(Number.isInteger=function(a){return Number.isFinite(a)&&-9007199254740992<=a&&9007199254740992>=a&&Math.floor(a)===a});var s=function(a,b){if(this instanceof s){if(a&&a.ajs===P&&a instanceof s)return a}else return new s(a,b);this.length=0;this.selector="string"==typeof a?a:"";if(a)if("body"===a)this[0]=
g.body,this.length=1;else if(a===d)this[0]=d,this.length=1;else if("string"===typeof a)if(this.context=b=b||g,"<"==a.charAt(0)){var f=g.createElement("div");f.innerHTML=a;this.push(f.childNodes)}else this.push(m(s(b),a));else a&&(1==a.nodeType||9==a.nodeType?(this[0]=a,this.length=1):this.push(a));return this};Array.forEach||(Array.forEach=$?function(a,b,f){return $.apply(a,G.call(arguments,1))}:function(a,b,f){for(var c=O(a),d=c.length>>>0,j=-1;++j<d;)j in c&&T(b,f,c[j],j,a)});Array.filter||(Array.filter=
K?function(a,b,f){return K.apply(a,G.call(arguments,1))}:function(a,b,f){a=O(a);for(var c=a.length>>>0,d=[],j,g=0;g<c;g++)g in a&&(j=a[g],T(b,f,j,g,a)&&d.push(j));return d});Array.reduce||(Array.reduce=L?function(a,b,f){return L.apply(a,G.call(arguments,1))}:function(a,b,f){var c=O(a),d=c.length>>>0,j=0;if(0===d&&1>=arguments.length)throw new TypeError("Array length is 0 and no second argument");for(void 0===f&&(f=(++j,c[0]));j<d;++j)j in c&&(f=b.call(void 0,f,c[j],j,c));return f});V=M?null:function(a,
b,f,c){void 0===c&&(c=!0);var j=c;Array.forEach(a,function(a,d){j==c&&(j=!!T(b,f,a,d,this))},a);return j};Array.every||(Array.every=M?function(a){return M.apply(a,G.call(arguments,1))}:function(a,b,f){return V(a,b,f)});Array.some||(Array.some=aa?function(a){return aa.apply(a,G.call(arguments,1))}:function(a,b,f){return V(a,b,f,!1)});s.forEach=Array.forEach;s.filter=Array.filter;s.reduce=Array.reduce;s.every=Array.every;s.some=Array.some;Array.isArray||(Array.isArray=function(a){return"[object Array]"===
U.call(a)});Array.from||(Array.from=function(a){if(a.toArray)return a.toArray();a=O(a,!0);var b=a.length>>>0,f;try{f=G.call(a)}catch(c){}if(f&&f.length===b)return f;f=[];for(var j=0;j<b;j++)j in a&&(f[j]=a[j]);return f});Array.of||(Array.of=function(){return G.call(arguments)});s.extend=function(a){var b=1,f=arguments.length,c,j,d;if(f){for(;b<f;b++)if(d=arguments[b])for(j in d)if(N(d,j)&&null!==(c=d[j])&&void 0!==c)a[j]=c;return a}s.expand(s.fn,a);return this};s.trim=function(a){return null==a?"":
la.call(a)};s.gid=1;s.each=Array.forEach;s.noop=function(a){return a};s.quote=function(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")};s.callAsync=function(a,b,f,c){c&&clearTimeout(c);return setTimeout(function(){a.apply(b||null,f||[])})};E="&#039; &apos; &#39; &quot; &lt; &gt; &amp; ' ' ' \" < > &".split(" ");for(u=0;14>u;++u)E[u+14]=RegExp(E[u],"g");a.Html||(a.Html={},a.HTML=a.Html);a.Html.escape=n.bind(E,RegExp(E.slice(9,14).join("|")),7,21,0);a.Html.unescape=n.bind(E,RegExp(E.slice(0,
7).join("|")),0,14,7);s.inherits=function(a,b,f){a.prototype=Object.create((a.superclass=b).prototype);a.prototype.constructor=a;Object.isObject(f)&&s.extend(a.prototype,f);return a};da=I?"add":function(a,b){b=" "+b;return!H(a,b+" ")?a+b:a};ea=I?"remove":function(a,b){b=" "+b+" ";return H(a,b)?a.replace(b," "):a};s.prototype=s.fn={constructor:s,ajs:P,attr:function(a,b){var f=this[0],j,d,g;if("string"==typeof a&&void 0===b)return f&&(j=a in f||!("getAttribute"in f)?f[a]:f.getAttribute(a)),j;a=c(a,
b);j=0;for(d=this.length;j<d;j++)if(f=this[j])for(g in a)b=a[g],g in f||!("setAttribute"in f)?f[g]=b:f.setAttribute(g,b);return this},currentStyle:function(a){if(!this[0])return"";var b,f,c;if("getComputedStyle"in d)b=d.getComputedStyle(this[0])[a];else if(f=this[0].currentStyle,void 0===(b=f[a]))"font"==a?(b=""+f[a+"Style"],c=f[a+"Variant"],b+=c?" "+c:"",c=f[a+"Weight"],b+=c?" "+c:"",c=f[a+"Size"],b+=c?" "+c:"",c=f.lineHeight,b+=c?"/"+c:"",c=f[a+"Family"],b+=c?" "+c:""):"border"==a&&(b=f[a+"Width"]+
" "+f[a+"Style"]+" "+f[a+"Color"]);return b},css:function(a,b){var j=this[0],d,g,h;if("string"==typeof a&&void 0===b)return(j=j&&j.style&&j.style[a]||void 0)&&f.test(j)&&(j=parseFloat(j)),j;a=c(a,b);d=0;for(g=this.length;d<g;++d)if((j=this[d])&&(j=j.style))for(h in a)b=a[h],""!==b&&(!isNaN(b)&&!y[h])&&(b+="px"),j[h]=b;return this},size:function(){return this.length},push:function(a,b){if(b){var f=s(a);f.prevObject=this;return f}for(var f=this.length=0,c=a.length;f<c;++f)this[f]=a[f],this.length++;
return this},each:function(a){for(var b=0,f=this.length,c;b<f;++b)a.call(c=this[b],b,c,this);return this},eq:function(a){return this.push(this[a],1)},filter:function(a){a=a.split(".");return this.push(F(this,a[0],a[1]),1)},find:function(a){return this.push(m(this,a),1)},children:function(a){if(this[0]){var b=this[0].childNodes;return this.push(void 0===a?b:b[a],1)}return this.push(0,1)},end:function(){return this.prevObject||s()},parent:function(){var a=this[0],b=a&&a.parentElement||null;if(a&&!("parentElement"in
a)&&!b)for(b=a&&a.parentNode;b&&1!=b.nodeType;)b=b.parentNode;return this.push(b,1)},html:function(a){return void 0===a?this[0]&&this[0].innerHTML:this.each(function(){this.innerHTML=a})},val:function(a){if(void 0===a)return this[0]&&this[0].value||"";for(var b=this.length,f;b--;)if(f=this[b])f.value=a,f.setAttribute("value",a);return this},append:function(a){var b=this[0];b&&b.appendChild(v(arguments));return this},prepend:function(a){var b=this[0];b&&b.insertBefore(v(arguments),b.firstChild);return this},
after:function(a){var b=this[this.length-1];b&&b.parentNode&&b.parentNode.insertBefore(v(arguments),b.nextSibling);return this},before:function(a){var b=this[0];b&&b.parentNode&&b.parentNode.insertBefore(v(arguments),b);return this},remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},bind:function(a,b){return q(this,1,a,b)},unbind:function(a,b){return q(this,0,a,b)},trigger:function(a){return this.each(function(){try{this[a]()}catch(b){console.log&&
console.log(this,a)}})},one:function(a,b){return this.bind(a,function R(){s(this).unbind(a,R);return b.apply(this,arguments)}.bind(this))},hasClass:function(a){a=A.bind(null,a.replace(x," ").split(j));return"length"in this?Array.some(this,a):a(this)},addClass:function(a){return k.call(this,da,a)},removeClass:function(a){return k.call(this,ea,a)},toggleClass:function(a,b){var f="length"in this&&!("nodeType"in this)?this:[this];return((void 0===b?!s.fn.hasClass.call(f,a):b)?s.fn.addClass:s.fn.removeClass).call(f,
a)},hasMod:function(a){if(!a)return!1;a=function(a){return a.className&&this.test(a.className)}.bind(RegExp("(_"+a.trim().replace(/\s/g," _")+"(\\s|$))","g"));return"length"in this&&!l(this)?Array.some(this,a):a(this)},addMod:function(a){return k.call(this,function(a,b){a&&!H(a,b)&&(a=a.trim(),a+=" "+a.replace(/(\s|$)/g,b+"$1"));return a},"_"+a.trim().replace(/\s/g," _"))},removeMod:function(a){return k.call(this,function(a,b){a&&H(a,b)&&(a=a.trim(),a=" "+a.replace(RegExp("(\\s|^)[\\w-_]+"+b+"(?=\\s|$)",
"g"),""));return a.trim()},"_"+a.trim().replace(/\s/g," _"))},toggleMod:function(a,b){var f="length"in this&&!("nodeType"in this)?this:[this];return((void 0===b?!s.fn.hasMod.call(f,a):b)?s.fn.addMod:s.fn.removeMod).call(f,a)},closest:function(a,b){var f=this[0],c;b&&!l(b)&&(b=null);if(f){a=a.split(".");c=a[0]?a[0].toUpperCase():!1;a=a[1]?a.slice(1):!1;do if(l(f)&&(!c||f.tagName.toUpperCase()==c)&&(!a||A(a,f)))return this.push(f,1);while(f&&(!b||b!=f)&&(f=f.parentNode)&&f!==g.body)}return this.push(void 0,
1)},show:function(){var a=this.css("display");return"none"==a?this.css("display",""):a},hide:function(){return this.css("display","none")},toggle:function(a){void 0===a&&(a="none"==this.css("display"));return this[a?"show":"hide"]()},add:function(a,b){var f=s(a),c=0,j=this.length,d;b&&(f=f.filter(b));for(d=f.length;c<d;++c)this[c+j]=f[c];this.length+=d}};Array.forEach(["add","remove","has","toggle"],function fa(a,b,f,c){var j=a+(c||"Class");j in this.fn&&(this[j]=S.bind(s.fn[j]));c||fa.call(this,
a,b,f,"Mod")},s);s.get=function p(a,b){p._$_head||(p._$_head=s("head"));var f="ajs__jsonp__"+s.gid++,c=g.createElement("script");c.type="text/javascript";c.src=a+"&callback="+f;d[f]=function(a){b(a);d[f]=null;try{delete d[f]}catch(j){}setTimeout(s.fn.remove.bind(s(c)))};setTimeout(s.fn.append.bind(p._$_head,c))};s.getCaretPosition=function(a,b){if(!(b&&a!=g.activeElement)){var f=(a.nodeName||"").toUpperCase(),c,j,d,h;if(!("INPUT"!=f&&"TEXTAREA"!=f)){if("selectionStart"in a)return{start:+a.selectionStart||
0,end:+a.selectionEnd||0};if(g.selection){if((f=g.selection.createRange())&&f.parentElement()==a)c=a.value,d=c.length,h=c.replace(/\r\n/g,"\n"),j=a.createTextRange(),j.moveToBookmark(f.getBookmark()),f=a.createTextRange(),f.collapse(!1),-1<j.compareEndPoints("StartToEnd",f)?c=d:(c=-j.moveStart("character",-d),c+=h.slice(0,c).split("\n").length-1,-1<j.compareEndPoints("EndToEnd",f)||(d=-j.moveEnd("character",-d),d+=h.slice(0,d).split("\n").length-1));return{start:c,end:d}}}}};s.setCaretPosition=function R(a,
b,f){if(!l(a)&&a&&"length"in a)Array.forEach(a,function(a){R(a,b,f)});else if(a==document.activeElement)if(1==arguments.length?(b=0,f=a.value.length):2==arguments.length&&(f=b),a.setSelectionRange)a.setSelectionRange(b,f);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveEnd("character",f);c.moveStart("character",b);c.select()}};var ga=I?null:function(a,b){return H(a," "+b+" ")};s.__processHandler=function(a){return"object"===typeof a?a.handleEvent:a};var ha=/\[native\s+code\]/i.test(g.getElementsByClassName)?
function(a,b){return b.getElementsByClassName(a)}:function(a,b){return F(b[z]("*"),null,a)};s.support={oninput:"oninput"in g};s._random_string_=P;s.own=N;"ui"in a||(a.ui={});a.browser||(a.browser={});if(h)a.browser.msie=h;else if((u=d.opera)&&"function"==typeof(u=u.version))a.browser.opera=+u();a.$=s;if(!d.CSS||!d.CSS.supports)if(d.CSS||(d.CSS={}),!d.CSS.supports&&d.supportsCSS)d.CSS.supports=d.supportsCSS.bind(d);else{var W={};d.CSS.supports=function(a,b,f,c,j){var d=c+"\\/"+j;if(d in W)return W[d];
if(5>arguments.length)throw Error("WRONG_ARGUMENTS_ERR");var g=(c+"").replace(this,f),h=c&&j&&g in b.style;if(h)if(a)if(/\(|\s/.test(j))try{b.style[g]=j,h=!!b.style[g]}catch(x){h=!1}else b.style.cssText="display:none;height:0;width:0;visibility:hidden;position:absolute;position:fixed;"+c+":"+j,document.documentElement.appendChild(b),h=b.currentStyle[g]==j,document.documentElement.removeChild(b);else b.style.cssText=c+":"+j,h=b.style[g]==j;b.style.cssText="";return W[d]=h}.bind(/(-)([a-z])/g,h&&10>
h,d.document.createElement("_"),function(a,b,f){return f.toUpperCase()})}h=u=E=n=null}.call(this);
void function(v,n){"use strict";function k(){this._asynchMarkers={}}var A=1,l=n._random_string_,e="uuid"+l,t=n.own,C="noprop_"+e,q=["target","preventDefault","isDefaultPrevented","stopImmediatePropagation"],c=Object.isPlainObject,m=n.extend,F=n.__processHandler;m(k.prototype,{constructor:k,buildClassName:function(c,g){g=g||this.$Elm;var h,a,b;if(-1!=(b=c.indexOf("&")))c=(h=g.selector)&&("."===(a=h.charAt(0))||"#"===a)?(0<b?c.substr(0,b):"")+h.substr(1)+c.substr(b+1):"";return c},findSub:function(c){var g=this.$Elm,
h;if("string"===typeof c){if((h=c.charAt(0))&&"."!==h&&"#"!==h&&"["!==h)c="."+c;c=this.buildClassName(c)}return new n(c,g)},hasTrigger:function(c){var g=this._,h;if(g&&(h=g.__events__))for(c=c.toUpperCase().split(" ");g=c.pop();)if(g in h)return!0;return!1},addTrigger:function(c,g){var h=this._,a;if(g){h||(h=this._={});c=c.toUpperCase().split(" ");for((a=h.__events__)||(a=h.__events__={});h=c.pop();)if(h=a[h]?a[h]:a[h]={},!g[e]&&(g[e]=l+ ++A)||!(g[e]in h))h[g[e]]=g}return this},removeTrigger:function(c,
g){var h=this._,a;if(!h||!g||!g[e]||!(a=h.__events__))return this;for(c=c.toUpperCase().split(" ");h=c.pop();)(a=a[h])&&g[e]in a&&delete a[g[e]];return this},fireTrigger:function(d){var g=this,h=g._,a,b,f,j=(f=d&&"object"==typeof d)&&d.type||d,x,w=!1,e=!1,z,k=!0,h=!h||!(a=h.__events__)||!j||!(a=a[j.toUpperCase()]);if((z=this._nextTriggerOptions)&&j in z)f&&m(d,z[j]),delete z[j];if(h)return k;f||(d={type:d});if(void 0===d.name||void 0===d.namespace)z=j.split(":"),d.name||(d.name=z[1]||z[0]),d.namespace||
(d.namespace=z.length?z[0]:"");z=Array.reduce(q,function(a,b){a[b]=b in d?d[b]:C;return a},{});d.currentTarget=d.target=this;x=d.preventDefault;d.preventDefault=function(){x&&x.apply(this.context,arguments);w=!0};d.isDefaultPrevented=function(){return w};d.stopImmediatePropagation=function(){z.stopImmediatePropagation?z.stopImmediatePropagation.apply(this.context,arguments):this.stopPropagation&&this.stopPropagation();e=!0};for(b in a)if(t(a,b)&&(f=a[b],"object"===typeof f&&(g=f),(f=F(f))&&!1===(k=
f.call(g,d))&&d.preventDefault(),e))break;!1!==k&&d.isDefaultPrevented()&&(k=!1);Array.reduce(q,function(a,b){a[b]===C?delete d[b]:d[b]=a[b];return a},z);if(c(h=d.nextTriggerOptions)){if(!(z=this._nextTriggerOptions))z=this._nextTriggerOptions={};for(b in h)if(t(h,b)&&c(g=h[b]))z[b]||(z[b]={}),m(z[b],g)}z=d=f=g=e=w=j=f=a=h=null;return!1!==k},_callAfterTrigger:function(c){return this.fireTrigger(c,c.type+":AFTER")},disable:function(){this.__disabled=!0},enable:function(){this.__disabled=!1},_callTriggerFunctionAsync:function(){var c=
this.currentTarget;if(!(!1===this.result||!0!==this.async||!c._asynchMarkers||this._asynchMarker!==c._asynchMarkers[this.type])&&c instanceof k)if(c._asynchMarkers[this.type]=null,this.type in c)c[this.type](this)}});v.ui||(v.ui={});v.ui.ajsUIComponent=k}.call(null,this.ajs,this.ajs.$);
void function(v,n,k){"use strict";function A(e,t){if(!(this instanceof A))return new A(e,t);e=k(e);if(1<e.size())return Array.reduce(e,function(e,k,c){c&&e.push(new A(k,t));return e},[this]);this.opts=t=k.extend({cnLink:"js-link",cnMenu:"js-menu",cnSection:"js-section",cnExpand:"js-expand",cnHover:"js-hover",cnIndex:0,onselect:k.noop,timeout:1500,hideByClick:!0,autoPos:!1},t);this.$Elm=e;this.$Link=this.findSub(t.cnLink).bind("click mouseout mouseover blur keyup",this).attr("unselectable","off").css({userSelect:"none",
MozUserSelect:"none",WebKitUserSelect:"none",OUserSelect:"none",MSUserSelect:"none"});!1!==t.tabIndex&&this.$Link.attr("tabIndex",n.ui.tabIndex++);this.$Link.find("*").attr({unselectable:"off"});this.$Menu=this.findSub(t.cnMenu).bind("click mouseout mouseover mousedown mouseup",this);this.$Menu.__Sections=this.findSub(t.cnSection);0<=t.cnIndex&&this._onSelect({},this.$Menu.__Sections[t.cnIndex]);Array.forEach(["cnSectionHover","cnSectionExpand"],function(e){var k=this.opts[e];k&&(this.opts[e]=this.buildClassName(k))},
this)}var l=k(v);k.inherits(A,n.ui.ajsUIComponent,{handleEvent:function(e,t){if(!this.__disabled){var l=this.opts,q=e.currentTarget,c=this.$Menu[0],m=this.$Link[0],F;clearTimeout(this._tid);t=t||e.type;switch(t){case "keyup":if(q===m&&(l=e.keyCode,40==l||38==l||13==l))this.expanded()?13==l?(this._onSelect(e),this._expand(!1)):this._move(40==l?1:-1):13==l&&this.handleEvent(e,"keyup.click");break;case "blur":this.__down||(q=e.explicitOriginalTarget||v.activeElement,1!=q.nodeType&&(q=q.parentNode),this._hitTest(q)||
this._expand(!1));break;case "click":if(q!==document){if(void 0!=e.detail&&0==e.detail){e.preventDefault();break}if(1<e.which){F=!0;break}}case "keyup.click":q===m?e.preventDefault():q!==document&&this._onSelect(e);if(l.hideByClick||!this._hitTest(e))this._expand(!this.expanded()),F=!0;break;case "mouseup":case "mousedown":this.__down="mousedown"===t;F=!0;break;case "mouseover":q=e.target;do if(k.fn.hasClass.call(q,"js-section")){this._move(q);break}while(q!==c&&q!==m&&(q=q.parentNode));F=!0;break;
case "mouseout":0<l.timeout&&(this._tid=setTimeout(this._expand.bind(this,!1),l.timeout))}F||e.stopPropagation()}},_onSelect:function(e,k){(k||(k=this.$Menu.find("."+this.opts.cnHover)[0]))&&this.opts.onselect.call(this,e,k)},_move:function(e){var l=this.$Menu.__Sections,n=this.opts.cnHover,q=-1;l&&l.length&&(l.each(function(c,m){m=k(m);m.hasClass(n)&&(q=c,m.removeClass(n))}),e&&(e.tagName?k(e).addClass(n):(-1!=q&&(q+=e),l[q]||(q=~e?0:l.length-1),l.eq(q).addClass(n))))},_hitTest:function(e){return!!k(e.target||
e).closest("."+this.opts.cnMenu).size()},_expand:function(e){this.$Elm.toggleClass(this.opts.cnExpand,e);var k=this.$Menu,n,q,c;k.toggle(e);this.opts.autoPos&&(this.$Link[0]&&k[0])&&(e&&(n=this.$Link[0].getBoundingClientRect(),q=k[0].getBoundingClientRect(),c=n.height||n.bottom-n.top),k.css({marginLeft:e?n.left-q.left+"px":0,marginTop:e?n.top+c-q.top+"px":0}));l.unbind("click",this);e&&(this._move(),setTimeout(function(){l.bind("click",this)}.bind(this),0))},expanded:function(){return this.$Elm.hasClass(this.opts.cnExpand)}});
n.ui.tabIndex=n.ui.tabIndex||1;n.ui.dropdown=A}.call(null,this.document,this.ajs,this.ajs.$);
void function(v,n,k){"use strict";function A(c){document.activeElement!=this&&(this.setAttribute("data-prevent-event-focus",1),this.focus(),void 0!=c&&n.$.setCaretPosition(this,this.value.length))}function l(c,m,e){void 0===C&&(C=CSS.supports("clip","auto")?"auto":"rect(auto,auto,auto,auto)");if(!m.items)return null;if(!(this instanceof l))return new l(c,m);c=k(c);if(1<c.size())return Array.reduce(c,function(c,d,a){a&&c.push(new l(d,m));return c},[this]);this.opts=m=k.extend({cnForm:"js-form",deleteName:!0,operandClassWrapperMenu:"w-portal-menu__search__operands__menu",
operandClassWrapperInput:"w-portal-menu__search__operands__input"},m);this.$Elm=c;c.bind("scroll",this);c.find(".w-portal-menu__search__operands__width_outer").bind("scroll",this);c.find(".w-portal-menu__search__operands__width_inner").bind("scroll",this);this.$Input=this.$original_Input=e;this.$Input.bind(t,this);this.operandsKeysString="";this.operandsKeys={};this.operandsNames={};this.operands={};this.operandsTabIndex={};var d=!this.opts.order;d&&(d=this.opts.order={});Array.forEach(Object.keys(this.opts.items),
function(c,h){var a=this.opts.items[c];c=c.toUpperCase();this.operandsKeys[c]=a;this.operandsNames[a]=c;this.operands[a]=void 0;this.operandsTabIndex[a]=n.ui.tabIndex++;this.operandsKeysString+="|"+c+"|";d&&(d[c]=h)},this);this.operandsKeysString=this.operandsKeysString.toUpperCase();this.operandsKeysOrder={};this.operandsNamesOrder={};Array.forEach(Object.keys(this.opts.order),function(c){var d=this.opts.order[c];c=c.toUpperCase();this.operandsNamesOrder[this.operandsKeys[c]]=this.operandsKeysOrder[c]=
d},this)}var e=n.browser.msie,t=k.support.oninput&&(!e||9<e)?"input":"input keypress keyup",C,q=k.own;k.inherits(l,n.ui.ajsUIComponent,{handleEvent:function(c){if(!this.__disabled){var m=c.type;if(t.contains(m))return m=c.keyCode,8==m||46==m||37==m||39==m?void 0:this._operandsInput(c);if("click"==m&&"LABEL"==(c.currentTarget.nodeName+"").toUpperCase())return this._operandLabelClick(c);if("scroll"==m)return this.horisontalScroll(c),this._checkLabelsPosition(c),!1;var e,d=k(c.target),g,h,a="data-prev-operand";
if("keydown"==m){g=d.attr("data-operand");h=this.operands[g];m=c.keyCode;if(!h||!m)return;e=k.getCaretPosition(c.target,!0);if(37==m&&0===e.end||39==m&&e.start===d[0].value.length&&(a="data-next-operand")){if(d=d.attr(a),d=this.operands[d])this._currentOperandObject=h,c.preventDefault(),this.selectOperand(d,"data-next-operand"!=a?-1:0),h=d}else if(8==m&&0===e.start&&0===e.end)this._currentOperandObject=h,c.preventDefault(),this.deactivateOperand(g),h=null;else if((8==m||46==m)&&!1===h.stable&&(0===
e.start&&e.end===c.target.value.length||8==m&&1===e.start&&1===e.end))c.target.value="",this._currentOperandObject=h,c.preventDefault(),this.deactivateOperand(g),h=null}else"keyup"==m&&(g=d.attr("data-operand"),h=this.operands[g]);h&&this._checkOperandCaretPosition(h)}},setActiveInput:function(c,m){if(this.$Input!==c&&this.fireTrigger({type:"operands:activeInputChange",oldInput:this.$Input,newInput:c,isOperandInput:!!c.attr("data-operand"),isNewOperand:m||!1}))this.$Input=c},getCurrentOperand:function(){return this._currentOperandObject},
createOperands:function(c,m,l,d,g){d=void 0==d?1:d;c=c.toUpperCase();var h=this.opts,a=this.$Elm,b=h.operandClassWrapperMenu,f=h.operandClassWrapperInput,j,x,w,D=this.operandsKeys[c],z=this.operandsNamesOrder[D],q=this.$Input[0].getAttribute("data-operand");if(D){w=this.$Input;(h=this.operands[D])?(f=h.$Input,a.css("display","")):(x=a.find("."+f+"_"+D),f=x.find(".portal-menu__search__operands__input__field").attr({tabIndex:this.operandsTabIndex[D]}),a.css("display",""),a=a.find("."+b+"_"+D).css("display",
""),h=this.operands[D]=new n.ui.dropdown(a.find(".portal-menu__search__operands__menu"),{cnLink:"portal-menu__search__operands__menu__button",cnMenu:"portal-menu__search__operands__menu__dropdown",cnExpand:"portal-menu__buttons__item_open",cnHover:"portal-menu__buttons__item_hover",cnIndex:z,timeout:0,tabIndex:!1,autoPos:!0,onselect:function(a,b,f){if((b=f&&f.getAttribute("data-operand-name"))&&b!==a)f=this.operands[a],((a=this.operands[b])&&!a.isActive||!a&&b in this.operands)&&this.createOperands(this.operandsNames[b],
"",void 0,0),this.deactivateOperand(f.operandName,void 0,a)}.bind(this,D)}),k.bind("labels"in f[0]?f[0].labels[0]:f.closest("label")[0],"click",this),f.bind("focus",this.operandsFocus.bind(this,f,h)).bind(t,this.updateOperandWidth.bind(this,h,null)),b=t+(t.contains("keydown")?"":" keydown"),b+=b.contains("keyup")?"":" keyup",f.bind(b,this),h.operandName=D,h.operandKey=c,h.InputWrapper=x,h.MenuWrapper=a,h.$Input=f,h.$Input.attr("data-operand",D),h.ElementForHeight=k("<span></span>").css({position:"fixed",
top:"-10000px",left:"-10000px",visibility:"hidden",font:h.$Input.currentStyle("font"),padding:h.$Input.currentStyle("padding"),border:h.$Input.currentStyle("border")}),k(v.body).append(h.ElementForHeight));f[0].name=f.attr("data-input-name");h.isActive=!0;h.stable=!0!==g;w.attr("data-operand")?void 0!=l&&(w[0].value=l):(this.opts.deleteName&&(this.$original_Input.__name=this.$original_Input[0].name),this.$original_Input.__value=this.$original_Input[0].value,this.opts.deleteName&&(this.$original_Input[0].name=
""),this.$original_Input[0].value="",this.$original_Input.attr("readonly","true"),this.$original_Input.css("visibility","hidden"),this.$original_Input.attr("data-allow-empty-value","true"));if(w!=h.$Input){if(c=w[0].getAttribute("data-next-operand"))j=this.operands[c],j.$Input.attr("data-prev-operand",D);w!=this.$original_Input&&w.attr("data-next-operand",D);if(q&&(j=this.operands[q])!=h)f.attr("data-prev-operand",q),j.InputWrapper.after(h.MenuWrapper[0]),h.MenuWrapper.after(h.InputWrapper[0]),c?
f.attr("data-next-operand",c):f[0].removeAttribute("data-next-operand")}h.MenuWrapper.css("display","");h.InputWrapper.css("display","");8>e&&(b=h.MenuWrapper[0].className,h.MenuWrapper[0].className="",h.MenuWrapper[0].className=b);void 0!=m&&(f[0].value=m);(j=this.operands[w[0].getAttribute("data-operand")])&&this.updateOperandWidth(j);this.updateOperandWidth(h);this._checkLabelsPosition();this.setActiveInput(f,!0);0<d&&(2==d&&f.attr("data-prevent-event-focus",1),f[0].focus(),!e&&!n.browser.opera?
this.__asyncFocusHandler=k.callAsync(A,f[0],[m],this.__asyncFocusHandler):void 0!=m&&n.$.setCaretPosition(f[0],m.length));return this._currentOperandObject=h}},deactivateOperand:function(c,m,e){m=void 0==m?1:m;var d,g,h,a,b;if(c=this.operands[c]){this._resetLabelsPosition(c);this._currentOperandObject=null;b=c.$Input==this.$Input;a=c.$Input.val();g=c.$Input[0].getAttribute("data-next-operand");h=c.$Input[0].getAttribute("data-prev-operand");this.opts.deleteName&&(c.$Input[0].name="");c.$Input[0].removeAttribute("data-next-operand");
c.$Input[0].removeAttribute("data-prev-operand");c.$Input[0].name="";c.$Input.val("");if(g||h||e){if(g&&(d=this.operands[g]))h?d.$Input[0].setAttribute("data-prev-operand",h):d.$Input[0].removeAttribute("data-prev-operand");h&&(d=this.operands[h])?(g?d.$Input[0].setAttribute("data-next-operand",g):d.$Input[0].removeAttribute("data-next-operand"),b&&(e||(e=d))):b&&(e||(e=this.operands[g]));e&&this.setActiveInput(e.$Input)}else this.$Elm.css("display","none"),b&&this.setActiveInput(this.$original_Input),
this.opts.deleteName&&(this.$Input[0].name=this.$original_Input.__name),this.$Input[0].removeAttribute("readonly"),this.$Input.css("visibility",""),this.$original_Input[0].removeAttribute("data-allow-empty-value"),this.Suggest&&this.Suggest.applyToInput(this.$Input);this.$Input[0].value=a&&this.$Input[0].value?this.$Input[0].value+" "+a:this.$Input[0].value||a||"";0<m&&(2==m&&this.$Input.attr("data-prevent-event-focus",1),this.__asyncFocusHandler=k.callAsync(this.$Input[0].focus,this.$Input[0],null,
this.__asyncFocusHandler),k.setCaretPosition(this.$Input[0],this.$Input[0].value.length));c.MenuWrapper.css("display","none");c.InputWrapper.css({display:"none",width:"","min-width":""});e&&(e.isActive||this.createOperands(e.operandKey),this.updateOperandWidth(e),this.selectOperand(e,e.operandName==h?-1:0,0==m));c.stable=c.isActive=!1}},getOperandByKeyOrName:function(c){var e=c;return"object"==typeof e&&e||((e=this.operands[c])||(e=this.operands[this.operandsKeys[c]]))&&e},getOperandKeyByKeyOrName:function(c){return c in
this.operandsNames?this.operandsNames[c]:c in this.operandsKeys?c:null},getOperandValue:function(c){return(c=this.getOperandByKeyOrName(c))&&c.$Input.val()},setOperandValue:function(c,e,k,d){null==e&&(e="");var g=this.getOperandByKeyOrName(c);if(g)if(""===e){if(!k&&g.isActive)return g.$Input.val(e),this.deactivateOperand(g.operandName,0),e}else"none"==g.MenuWrapper.css("display")&&!d&&(g=this.createOperands(g.operandKey,void 0,void 0,0));else if(!g){if(!(c=this.getOperandKeyByKeyOrName(c)))return;
if(""!==e||k)g=this.createOperands(c,e,void 0,0)}g&&(g.$Input.val(e),this.updateOperandWidth(g));return e},operandsFocus:function(c,e){this._currentOperandObject=e;this.setActiveInput(c)},updateOperandWidth:function(c,e){var k="input"==t?10:20,d,g,h,a;if(c||(c=this._currentOperandObject))g=c.$Input,e=e||g[0].value,h=g[0].getAttribute("data-next-operand"),c.ElementForHeight.html(n.Html.escape(e)),d=c.ElementForHeight[0].clientWidth,22>d&&(d=22),d+=k,h?(k="width",h="minWidth"):(k="minWidth",h="width"),
c.InputWrapper.css(k)!=d&&(d+="px",c.InputWrapper.css(k,d),g.css(k,d),a=!0),c.InputWrapper.css(h)&&(c.InputWrapper.css(h,""),g.css(h,""),a=!0),a&&this._checkLabelsPosition()},selectOperand:function(c,e,l){l||(c.$Input[0].focus(),this.Suggest&&this.Suggest.applyToInput(c.$Input));void 0!==e&&(0>e&&(e=c.$Input.val().length),k.setCaretPosition(c.$Input[0],e));this._checkLabelsPosition();this._currentOperandObject=c},_operandLabelClick:function(c){this.__disabled||(this.$Input[0].focus(),c.preventDefault())},
_operandsInput:function(){if(!this.__disabled){var c=this.$Input[0].value,e,k=c.lastIndexOf(":"),d,g,h=0,a,b,f,j,x,w;j={type:"operands:find",input:this.$Input[0],inputValue:c,newOperand:null,lastPrefixIndex:k,currentOperand:this.$Input.attr("data-operand")||null};if(!1!==this.fireTrigger(j)){c=j.inputValue;d=k=j.lastPrefixIndex;if(a=j.newOperand)b=a,a=this.operandsNames[a];j.currentOperand&&this.$Input.oldValue!==c&&(f=!0,this.$Input.oldValue=c);if(!a&&0<=d){e=c.toUpperCase();for(w=this.operandsKeysString;~(g=
w.indexOf(e.substr(--k,d-k),h));)if(124===w.charCodeAt(g+(d-k)))if(a=e.substr(k,d-k),124===w.charCodeAt(g+(d-k)-a.length-1)){1>k||/\s/.test(e.charAt(k-1))||(a="");break}else a="";else h=g;j.newOperand=a}if(a&&(b||(b=this.operandsKeys[a]),b&&b in this.operands&&(!this.operands[b]||!this.operands[b].isActive)))if(j.type="operands:activate",j.leftPart=c.substring(0,k).trim(),j.rightPart=c.substring(d+1).trim(),!1!==this.fireTrigger(j))return""==j.leftPart+j.rightPart&&this._currentOperandObject&&(x=
this._currentOperandObject.operandName),c=this.createOperands(a,j.rightPart,j.leftPart),x&&this.deactivateOperand(x),c;f&&this._checkLabelsPosition()}}},horisontalScroll:function(c){if(!this.__disabled){var e=c.target;this.__scrollContainer||(this.__scrollContainer=e);e.scrollTop=0;c.preventDefault();c.stopPropagation();return!1}},_resetLabelsPosition:function(c){c&&(c.$Elm.css({width:"",height:""}),c.$Link.css({position:"",top:"auto",left:"auto",clip:C}))},_checkLabelsPosition:function(){if(!this.__disabled){var c,
e,k,d=this.operands,g=this.$Elm[0].getBoundingClientRect(),h,a,b,f,j,x=C,w;for(e in d)if(q(d,e)&&(k=d[e])&&k.isActive&&k.$Input){if(c=k.$Input[0]){j=k.$Link[0];w=c;var D=!0;f=void 0;f=k.$Elm[0].getBoundingClientRect();f.left>g.left&&(D=!1);D?(h||(h=w.getBoundingClientRect()),h.right<=g.left?h=!1:(b||(b=j.getBoundingClientRect()),w=b.width||b.right-b.left,f=h.right-30-(g.left+w),h=D=0>f?-f:0)):h=!1;if(!1!==(j=h))break;else h=b=null}c=void 0}this.__prevPositioned_operandObject&&void 0!==c&&this.__prevPositioned_operandObject.$Input[0]!=
c&&this._resetLabelsPosition(this.__prevPositioned_operandObject);if(c&&(a=k.$Elm))!j||0>j?j=0:(w=b.width||b.right-b.left,x=b.height||b.bottom-b.top,x=["0px",w+"px",x+"px",j+"px"],x="rect("+x.join(",")+")"),e=k.$Link,c.getBoundingClientRect(),a.css({width:e[0].clientWidth,height:e[0].clientHeight}),e.css({position:"absolute",top:0,left:0-j,clip:x}),this.__prevPositioned_operandObject=k}},_checkOperandCaretPosition:function(c){if(c&&this.__scrollContainer){var e=this.__scrollContainer,l=c.$Input[0],
d=l.value;if(d){var g=l.getBoundingClientRect(),h=c.$Link[0].getBoundingClientRect();g.left>=h.right||(l=k.getCaretPosition(l),d=d.substr(0,l.end),c.ElementForHeight.html(n.Html.escape(d)),c=c.ElementForHeight[0].clientWidth+g.left-(d?10:0),c<h.right&&(g=h.width||h.right-h.left,h=c-(h.left+g),0>h&&(e.scrollLeft+=h)))}}}});n.ui.tabIndex=n.ui.tabIndex||1;n.ui.operands=l}.call(null,this.document,this.ajs,this.ajs.$);
void function(v,n,k){"use strict";function A(l,e){if(!(this instanceof A))return new A(l,e);l=k(l);if(1<l.size())return Array.reduce(l,function(k,c,l){l&&k.push(new A(c,e));return k},[this]);this.opts=e=k.extend({cnForm:"js-form",cnInput:"js-input",cnBlur:"js-blur",cnPlaceholder:"js-placeholder",cnSection:"js-section",cnSectionTxt:"js-section-text",cnSectionLink:"js-section-link",cnSectionMenu:"js-section-menu",cnSectionHover:"js-section-hover",cnSectionExpand:"js-section-expand",cnSectionSelected:"js-section-selected",
paddingRight:35,searchInputResize:!0,useOperands:!1,autoTabIndex:!0},e);this.$Elm=l;this.$Form=this.findSub(e.cnForm).bind("submit",this);this.$Placeholder=this.findSub(e.cnPlaceholder);this.$Input=this.findSub(e.cnInput).bind("focus blur",this);e.autoTabIndex&&this.$Input.attr({tabIndex:n.ui.tabIndex++});this.$Section=this.findSub(e.cnSectionTxt);var t=this.findSub(e.cnSectionLink),C=e.newSubElementsLogic?t:this.$Elm;t.size()&&(this.Sections=new n.ui.dropdown(C,{cnLink:t,cnMenu:e.cnSectionMenu,cnHover:e.cnSectionHover,
cnExpand:e.cnSectionExpand,cnIndex:e.cnSectionIndex,onselect:this._section.bind(this)}));l.find("input").each(function(){"submit"==this.type&&(this.tabIndex=n.ui.tabIndex++)});e.suggest&&(this.Suggest=n.ui.suggest(l,e.suggest));e.operands&&((this.$Operands=new n.ui.operands(this.$Elm.find(".w-portal-menu__search__operands"),e.operands,this.$Input)).addTrigger("operands:activeInputChange",function(e){this.$Input=e.newInput;this.Suggest&&this.Suggest.applyToInput(this.$Input,e.isNewOperand);this.isPlaceholder=
!e.isOperandInput;this._placeholderCheck()}.bind(this)),this.Suggest&&this.Suggest.addTrigger("suggests:mark",function(e){if(e.updateInputValue){var c=e.newSuggestNode,k=e.oldSuggestNode,l=e.newSuggest,c=c&&c.getAttribute("data-search-name"),d,g=this.getCurrentOperand();if(!g||!g.stable)k&&c!=(d=k.getAttribute("data-search-name"))&&d&&this.deactivateOperand(d,!0),c&&(this.createOperands(this.getOperandKeyByKeyOrName(c),"","",2,!0),g=this.getCurrentOperand(),g.__onblue||(g.__onblue=function(){g.stable=
!0},g.$Input.bind("blur",g.__onblue)));this._checkLabelsPosition();this.updateOperandWidth(void 0,e.updateInputValue?l:void 0)}}.bind(this.$Operands)).addTrigger("suggests:select",function(e){var c=this.getCurrentOperand();if(!c||!c.stable)c.stable=!0;this._checkLabelsPosition();this.updateOperandWidth(void 0,e.updateInputValue?newSuggest:void 0)}.bind(this.$Operands)));this._placeholderCheck=this._placeholderCheck.bind(this);setTimeout(this._placeholderCheck);k(v).bind("DOMContentLoaded",this._placeholderCheck);
k(window).bind("load",this._placeholderCheck);this.isPlaceholder=!0;this._section({});this.isReady=!0;Array.forEach(["cnBlur","cnSection"],function(e){var c=this.opts[e];c&&(this.opts[e]=this.buildClassName(c))},this)}k.inherits(A,n.ui.ajsUIComponent,{handleEvent:function(k,e){var n=this.isEmpty(),v;switch(e||k.type){case "submit":n&&(this.$Input.trigger("focus"),k.preventDefault());break;case "blur":v=n;default:this.$Elm.toggleClass(this.opts.cnBlur,!(!v||!this.isPlaceholder)),v&&this.val("")}},
_placeholderCheck:function(l){l=l&&l.type;"DOMContentLoaded"===l?(k(v).unbind("DOMContentLoaded",this._placeholderCheck),setTimeout(this._placeholderCheck,20)):"load"===l?(k(window).unbind("load",this._placeholderCheck),setTimeout(this._placeholderCheck,20)):("unknown"==typeof v.activeElement||this.$Input[0]!==v.activeElement)&&this.handleEvent({type:"blur"})},_section:function(l,e){var n=this.opts,v=e||l.target,q=n.cnSectionSelected,c=k(v).closest("."+n.cnSection),n=this.findSub(n.cnSection);v&&
(n.filter("."+q).removeClass(q),c.addClass(q));if((c=n.filter("."+q))[0])this.$Form.attr({action:c.attr("data-action"),target:c.attr("data-target")||"_self"}),this.$Input.attr("name",c.attr("data-input-name")),this.$Section.html(c.html()),this.Suggest&&this.Suggest.set("ajaxUrl",c.attr("data-suggest-url"),!this.isReady);l&&l.preventDefault&&(("click"==l.type||13==l.keyCode)&&this.$Input.trigger("focus"),l.preventDefault())},isEmpty:function(){return""==this.val()},val:function(l){var e;return void 0!==
l?(e=this.__val!=l,this.$Input.val(l),this.__val=l,e&&this._placeholderCheck(),this):k.trim(this.$Input.val())},getSuggest:function(){return this.Suggest},setPlaceholder:function(k){this.$Placeholder.html(k)},disable:function(){this.$Operands&&this.$Operands.disable();this.Suggest&&this.Suggest.disable();this._placeholderCheck()},enable:function(){this.$Operands&&this.$Operands.enable();this.Suggest&&this.Suggest.enable();this._placeholderCheck()}});n.ui.tabIndex=n.ui.tabIndex||1;n.ui.search=A}.call(null,
document,this.ajs,this.ajs.$);
void function(v,n,k){"use strict";function A(a){return String(a||"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function l(){}function e(a,b){b.data=a.call(this,b.data,b.findValue,b)}function t(a,b,f){var c=f.findLastWord;return!f.searchLast?a:a="function"===typeof c&&!c.test&&c.call?c.call(this,b,this):b.replace(c,"")}function C(a,b,f){if(!f.searchLast)return b;f=this.__prevSuggest;b=k.trim(b.replace(RegExp(A(f&&f.val||"")+"$"),"")+this.__val).replace(/\S+$/,"")+""+(f.val=a);""!=b&&(b+="");return b}function q(a,
b){if(!(this instanceof q))return new q(a,b);q.superclass.apply(this);a=k(a,void 0);1<a.size()&&(this.__others=Array.reduce(a,function(a,f,c){c&&a.push(new q(f,b));return a},[this]));this.__prevSuggest={};this.__expandedState=!1;var f=b.suggestSeparator,c=b.multiSuggests,d=b.suggestEscapeStart,h=b.suggestEscapeEnd;null!=f&&(f=b.suggestSeparator=RegExp(f instanceof RegExp?f.source:f+"",(f.ignoreCase?"ig":"g")+(f.multiline?"m":"")));void 0===c&&b.searchLast&&(b.getSuggest=t,b.setSuggest=C);d&&h?(d instanceof
RegExp||(b.suggestEscapeStart=RegExp(d+"")),h instanceof RegExp||(b.suggestEscapeEnd=RegExp(h+""))):b.suggestEscapeStart=b.suggestEscapeEnd=null;b.getData&&this.addTrigger("suggests:getData",e.bind(this,b.getData));b.multiSuggests&&!b.setSuggest&&(b.setSuggest=function(a,b){return b});this.opts=b=k.extend(new l,b);this._cache={};this.$Elm=a;this.$Input=null;this.applyToInput(this.findSub(b.cnInput));this.$Suggest=this.findSub(b.cnSuggest).bind("click mousedown",function(a){if(this._down="mousedown"==
a.type)this.__bluredCaret=k.getCaretPosition(this.$Input[0]);this._delayedHideStart()}.bind(this));this.$InternetCont=this.findSub(b.cnInternetCont).bind("click",this.hide.bind(this));this.$Internet=this.findSub(b.cnInternet);this.$List=this.findSub(b.cnList).bind("click",this._selectByClick.bind(this)).bind("scroll",this._onScroll.bind(this)).bind("mousewheel DOMMouseScroll",this._onMouseWheel);b.markByMouseOver&&this.$List.bind("mouseover",this._suggestNodeMouseover.throttle(100,this));b.fetching&&
(this._fetchOnScroll=this._fetchOnScroll.throttle(250,this),this.$List.bind("scroll",function(a){a.preventDefault();a.stopPropagation();this._fetchOnScroll()}.bind(this)));b.expire&&(this.__prevRequestTime=+new Date);k(window).bind("hashchange popstate",this);Array.forEach(["cnItem","cnItemTick","cnSelected","cdGroupHeader","cdSuggestHint"],function(a){var b=this.opts[a];b&&(this.opts[a]=this.buildClassName(b))},this);this._timeoutHandler=function(){var a=this._timeoutFunction,b=this._timeoutArguments;
this._timeoutFunction=this._timeoutArguments=null;a&&(Array.isArray(b)?a.apply(this,b):null!=b?a.call(this,b):a.call(this))}.bind(this);b=null}var c=encodeURIComponent,m=String.prototype.split,F=3!="1_1".split(/(_)/).length?function(a,b){var f=this;if(!(a instanceof RegExp))return void 0===a&&0===b?[]:m.call(f,a,b);var c=[],d=0,e,h,g;a=RegExp(a.source,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")+"g");f+="";b=void 0===b?4294967295:b>>>0;if(!b)return[];for(;e=a.exec(f);){h=
e.index+e[0].length;if(h>d&&(c.push(f.slice(d,e.index)),1<e.length&&e.index<f.length&&c.push.apply(c,e.slice(1)),g=e[0].length,d=h,c.length>=b))break;a.lastIndex===e.index&&a.lastIndex++}d===f.length?(g||!a.test(""))&&c.push(""):c.push(f.slice(d));return c.length>b?c.slice(0,b):c}:m,d=n.HTML.escape,g=n.ui.ajsUIComponent,h=Object.isObject;l.prototype={constructor:l,cnInput:"js-input",cnSuggest:"js-suggest",cnList:"&__suggest__inner",cnItem:"&__suggest__item",cnItemTick:"&__suggest__item__tick",cnSelected:"&__suggest__item_selected",
cnInternetCont:"&__suggest__item_internet",cnInternet:"&__suggest__item_internet-link",cdGroupHeader:"&__suggest__group-header",cdSuggestHint:"&__suggest__item__hint",getData:function(a){return(a=a&&a.data||a)&&"OK"==a[1]&&a[2]},template:function(a,b){var c=(h(b)&&(b.suggest||b.text||b.word)||b||"")+"",j=(h(b)&&(b.text||b.word)||b||"")+"",j=d(j),c=d(c);a=d(a);j=j.replace(RegExp(a,"i"),'<b class="'+this.opts.cnItemTick+'">$&</b>');return'<div data-suggest="'+c+'" class="'+this.opts.cnItem+'">'+j+"</div>"},
groupHeaderTemplate:function(a){return'<div class="'+this.opts.cdGroupHeader+'">'+a+"</div>"},templateInternetVal:function(a){return d(a)},request:function(a,b){k.get(a,b)},multiSuggests:!1,suggestSeparator:/\s/g,suggestEscapeStart:null,suggestEscapeEnd:null,getSuggest:function(a){return a.trim()},setSuggest:k.noop,minLength:1,maxLength:0,timeout:300,expire:0,autosubmit:!0,ajaxUrl:void 0,searchUrl:"http://go.mail.ru/search?q=#query#",encodeBeforeSend:!0,showInternet:!0,ondraw:k.noop,grouping:!1,fetching:!1,
fetchCount:30,markByMouseOver:!0,autoMarked:-1,undeterminedStage:!0,selectInputDiff:!1,selectByTab:!1,hideInactive:!0,useCache:!0,searchLast:!1,findLastWord:/^.*\s+/,ondata:k.noop,onprint:null,onexpand:k.noop,onsearch:k.noop,onselect:k.noop};k.inherits(q,g,{handleEvent:function(a,b){if(!this.__disabled){var c=a.keyCode,j=this.opts,d=j.hideInactive,e,h,g,k=!0;void 0===b&&(b=b||a.type);if(e=+this.$Input.attr("data-prevent-event-"+b))--e,e?this.$Input.attr("data-prevent-event-"+b,e):this.$Input[0].removeAttribute("data-prevent-event-"+
b);else if(this.blurred=v.activeElement!=this.$Input[0],!(this.blurred&&"blur"!=b)){switch(b){case "hashchange":case "popstate":case "blur":!this._down||"blur"!=b?(this.blurred=!0,d&&(h=this.__currentMarkedChangeValue,!1!==this.hide()&&(h&&this._onselect(a,h),g=!0))):this._down&&(this._down=k=!1,v.activeElement!=this.$Input[0]&&(this.$Input.attr("data-prevent-event-focus",1),this.$Input[0].focus(),(h=this.__bluredCaret)&&n.$.setCaretPosition(this.$Input[0],h.start,h.end),this._findValue()));break;
case "keyup":case "keydown":d=this.isExpanded();if((38==c||40==c)&&d)"keydown"==b&&this._mark(38==c?-1:0),a.preventDefault(),a.stopPropagation();else if(39==c&&this.__currentMarkedChangeValue)this._onselect(a,this.__currentMarkedChangeValue);else if(13==c||9==c&&j.selectByTab){if(9==c&&a&&a.ctrlKey)return;"keydown"==b&&d&&(this.__currentMarked?this._onselect(a,this.__currentMarked,!0,j.autosubmit,!1,9==c||39==c):this.hide())}else if(27==c)"keyup"==b&&!1!==this.hide(a)&&(this._findValue(null),a.preventDefault(),
g=!0);else{this.handleEvent(a,"keyup"==b?"onprint":null);return}break;default:if(g=this._down=!1,!1!==(c=this._checkSomethingIsChanges()))if(this.__currentMarkedChangeValue=this.__currentMarked=null,j.useCache?d=this._cache[c]||null:(this._cache={},d=null),e=j.expire&&this.__prevRequestTime>+new Date+1E3*j.expire,e={type:"suggests:find",originalEvent:a,findValue:0<j.maxLength?c.substr(0,j.maxLength):c,data:d,expire:e},e.val=e.findValue,!1!==this.fireTrigger(e)){this._loadVal=null;this._internetVal(c);
c=c!=e.val?e.val:e.findValue;if(d=e.data)this._cache[c]=d;"onprint"==b&&j.onprint&&j.onprint.call(this,c,this);e.expire&&(this.reset(),d=null);this._tid&&(clearTimeout(this._tid),this._tid=this._timeoutFunction=this._timeoutArguments=null);d?(delete e.expire,this._timeoutFunction=this._rebuild,this._timeoutArguments=e,this._tid=setTimeout(this._timeoutHandler)):this._checkPrevResultIsNotEmpty(c,j)&&(this._timeoutFunction=this.find,this._timeoutArguments=c,this._tid=setTimeout(this._timeoutHandler,
j.timeout))}}g&&this._tid&&(clearTimeout(this._tid),this._tid=this._timeoutFunction=this._timeoutArguments=null);k&&this._delayedHideEnd()}}},applyToInput:function(a,b){this.$Input&&this.$Input.unbind("blur focus click keyup keydown",this);this.$Input=k(a).attr("autocomplete","off").bind("blur focus click keyup keydown",this);!b&&(this.$Suggest&&this.isExpanded())&&this._rebuild(this.__val)},_checkSomethingIsChanges:function(){var a=this._findValue(),b;if(b=this.__currentMarkedChangeValue)if(b=b.getAttribute("data-suggest"),
b==a)return!1;this.__prevSuggest.caret=this.__prevSuggest.val=null;return this._findValue()},_checkPrevResultIsNotEmpty:function(a,b){if(!b.useCache)return!0;for(var c=a.length-1,j,d=this._cache;c>=b.minLength;c--)if(j=a.substr(0,c),void 0!==d[j])return(j=d[j])&&0<j.length;return!0},_closest:function(a,b){var c=this.$List[0];do if(1==a.nodeType&&"getAttribute"in a&&(b=a.getAttribute("data-suggest-idx"),0<b))return a;while(a&&(a=a.parentNode)&&a!==c)},_suggestNodeMouseover:function(a){if(!this.__disabled){var b;
a.target.parentNode&&(b=this._closest(a.target));b&&this._mark(void 0,b,void 0,!1,a)}},_selectByClick:function(a){if(!this.__disabled){var b=this.opts,c=this._closest(a.target);c&&!1!==this._mark(null,c,!0,void 0,a)&&this._onselect(a,c,!0,b.autosubmit);return!1}},_mark:function(a,b,c,j,d){if(!(void 0!==b&&this.__currentMarked===b&&!!this.__currentMarkedChangeValue==j||this.__inFetching)){var e=this.opts,h=this.$List,g=this.__currentMarked||this.__currentMarkedChangeValue,l,r,n,m=this.__ListItems,
q,y,u;void 0===j&&(j=!0);if(m){c=g&&g.getAttribute("data-suggest")||null;q=m.size();l=r=(g&&~~g.getAttribute("data-suggest-idx")||0)-1;if(b)r=~~b.getAttribute("data-suggest-idx")-1;else{r=g?r+(0>a?-1:1):0>a?q-1:0;for(r=r>=q?-1:r;!b&&r<q&&0<=r;)b=m[r],b&&"none"!=b.style.display||(b=null,0>a?r--:r++);if(!b||0>r)r=-1,b=null}u=this.__val;n=null!=u&&this._cache[u];if(!b&&(-1<a&&-1<l&&e.fetching&&!n.EOF)&&!1!==this._fetchMore(a,this._mark.bind(this,a)))return;if((r>=q||0>r)&&!e.undeterminedStage)r=0>a?
q-1:0,b=m[r];b&&(a=b.getBoundingClientRect(),m=h[0].getBoundingClientRect(),0==r?h[0].scrollTop=0:a.top<m.top?h[0].scrollTop+=a.top-m.top:a.bottom>m.bottom&&(h[0].scrollTop+=a.bottom-m.bottom));d={type:"suggests:mark",oldSuggestIndex:l,oldSuggestData:0<=l&&n&&n[l]||null,oldSuggestNode:g,oldSuggest:c,newSuggestIndex:r,newSuggestData:0<=r&&n&&n[r]||null,newSuggestNode:b,newSuggest:c=b&&b.getAttribute("data-suggest")||null,updateInputValue:j,findValue:u,originalEvent:d||null};e=e.selectInputDiff;j&&
e?(y=(y=this.__prevSuggest.caret)?y.end:u.length,l=y+(c||"").length):l=y=-1;d.caretPositionStart=y;d.caretPositionEnd=l;if(!1!==this.fireTrigger(d))if(c=d.newSuggest,l=d.caretPositionEnd,y=d.caretPositionStart,void this._cancelMark(),b){k.addClass(b,this.opts.cnSelected);this.__currentMarked=b;if(j!=(j=d.updateInputValue)&&j&&e&&-1===l&&y===l)y=(y=this.__prevSuggest.caret)?y.end:u.length,l=y+(c||"").length;if(j=d.updateInputValue)this.__currentMarkedChangeValue=this.__currentMarked}else this.__currentMarkedChangeValue=
this.__currentMarked=null;else return!1}else c=g.attr("data-suggest");j&&this._findValue(c,null,j&&-1<y?y:void 0,j&&-1<l?l:void 0)}},_onselect:function(a,b,c,j,d,e){var h=this.opts,g=b.getAttribute("data-suggest"),l=b.getAttribute("data-suggest-idx")-1,r=this._cache[this.__val],n=this.$Input,m=this._getSuggestReplacement(),q=m?m.inputValue:n.val();d={type:"suggests:select",newSuggest:g,newSuggestData:r&&r[l],newSuggestIndex:l,newSuggestNode:b,findValue:this.__val,inputValue:q,inputValueLeftPart:m?
m.leftPart:"",inputValueRightPart:m?m.rightPart:"",inputSelectionStart:-1,inputSelectionEnd:-1,changeInputValue:!d,originalEvent:a||null,submitForm:j||!1};var y;(!c||!j)&&k.removeClass(b,h.cnSelected);b=h.onselect.call(this,d,this);if(!1!==b){if(!1!==(b=this.fireTrigger(d))){this.__currentMarkedChangeValue=this.__currentMarked=null;d.changeInputValue&&this._findValue(d.newSuggest,m,-1!=(l=d.inputSelectionStart)?l:void 0,-1!=(l=d.inputSelectionEnd)?l:void 0);a&&!e&&(a.stopPropagation(),a.preventDefault());
if(d.submitForm&&(a=n.closest("form")[0]))for(var l=a.length,u;l--;)if((u=a[l])&&"submit"==u.type){u.click();break}y=!0}e||this.$Input[0].focus();y&&this.hide()}this.__prevSuggest.caret=this.__prevSuggest.val=null;return b},_cancelMark:function(){var a=this.opts.cnSelected,b=this.$List.find("."+a);b.length&&b.removeClass(a);return b},_loaded:function(a,b,c){if(v.activeElement==this.$Input[0]){var d=this.opts,e=d.hideInactive;b={data:b,findValue:a,type:"suggests:getData"};b.suggestValue=a;!1!==this.fireTrigger(b)&&
(d.afterGetData&&d.afterGetData.call(this,b),this._cache[a]=b=b.data,d.ondata.call(this,a,b,this),(c||this._loadVal==a&&(!e||!this.blurred))&&this._rebuild(a,void 0,void 0,void 0,!0===c))}},_rebuild:function(a,b,c,d,e){null==b?b=-1:d||(d=this.__ListItems&&this.__ListItems[b]);var g=this.opts,l=h(a),m=l?a.findValue:a,n=null!=m&&"string"==typeof m,r=n&&this._cache[m]||[],q=r&&!(!r.length&&!r.toArray),B=-1<b?b+(void 0!=c?c:g.fetchCount):-1,t;c=g.grouping;r={type:"suggests:rebuild",showContainer:e||q&&
n,showList:q,showInternet:g.showInternet,data:r,findValue:m,dataFrom:b,dataTo:B,markedItem:g.autoMarked};a=l?k.extend(a,r):r;a.suggest=m;r=a.data;!Array.isArray(r)&&r.toArray&&(r=r.toArray());a.showList=q;a.showContainer=a.showContainer&&(a.showList||a.showInternet);b=a.dataFrom;B=a.dataTo;if(a.showContainer&&!1!==this.fireTrigger(a)&&(d||this.__val!==(m=a.findValue!=m?a.findValue:a.suggest))){this.__inFetching=!1;this.__currentMarked=d||null;this.__val=m;if(a.showList){q=-1<b?b+1:0;l=-1<B&&r.length>
B?B+1:r.length;B=[];for(e=A(m);q<l;q++)if(n=r[q])c&&(h(n)&&n.groupHeader)&&B.push(k.trim(g.groupHeaderTemplate.call(this,n.groupHeader,e,n))),B.push(k.trim(g.template.call(this,e,n,q,r,m)));if(B.length)if(-1<b&&d)B=k(B.join("")),k(d).after(B),B=B.filter("."+g.cnItem),this.__ListItems.add(B),Array.forEach(B,function(a,c){a.setAttribute("data-suggest-idx",c+b+2)});else if(this.__ListItems=this.$List.html(B.join("")).find("."+g.cnItem).each(function(a,b){b.setAttribute("data-suggest-idx",a+1)}),B=this.$List[0])B.scrollTop=
0}g.ondraw.call(this,m,r,this)}delete a.dataFrom;delete a.dataTo;!1!==this._onExpand(a.showContainer,a)&&(this.$List.toggle(a.showList),this.$Suggest.toggle(a.showContainer),this.$InternetCont.toggle(a.showInternet));!this.__currentMarked&&(a.showContainer&&a.showList&&Number.isInteger(t=a.markedItem)&&0<=t)&&this._mark(t,void 0,void 0,!1);a.type="suggests:afterRebuild";this.fireTrigger(a);a.data=null},_request:function(a,b,c){this.opts.request(a,b,c)},_internetVal:function(a){var b=this.opts;a=d(a);
if(b.showInternet&&(this.$InternetCont.attr("href",b.searchUrl.replace("#query#",b.encodeBeforeSend?c(a):a)),!1!==(a=b.templateInternetVal.call(this,a,this.$InternetCont,this.$Internet))))b=this.$Internet,b.size()&&(b.attr("innerHTML","")[0].innerHTML=a)},_onExpand:function(a,b,c){if(this.__expandedState!==a){this.opts.onexpand.call(this,a,this);b=b||{};b.type="suggests:"+(a?"show":"hide");c&&(b.originalEvent=c);if(!1===this.fireTrigger(b))return!1;this.__expandedState=a}else return!1},val:function(a){return void 0!==
a?(this._internetVal(a),this.$Input.val(a),""==a&&!this._cache[a]&&this.hide(),this):this._findValue()},getFindWords:function(){var a=this.opts,b=a.multiSuggests,c=a.suggestSeparator,d=this.$Input[0],e=d.value,h,g,k,l,m=null,n,q=a.suggestEscapeStart,t=q&&a.suggestEscapeEnd,y;if(a=this.hasTrigger("suggests:getSuggestWords suggests:getSuggestWords:AFTER")){y={type:"suggests:getSuggestWords",input:d,inputValue:e,data:null};if(!1===this.fireTrigger(y))return[];e=y.inputValue}if(b){b=F.call(e,c);d=[];
c=RegExp(c.source,(c.global?"g":"")+(c.ignoreCase?"i":"")+(c.multiline?"m":""));h=b.length;for(g=0;g<h;++g){k=b[g];(l=c.exec(e))&&(l=l[0]);if(q&&k)if(null!=m){if(t.test(k)){b[m]=d.slice(m,g).join("")+k;for(m++;m<=g;m++)b[m]=null;m=null}}else if(-1!=(n=k.search(q))&&-1==k.substr(n+1).search(t))m=g;q&&(d[g]=b[g]+(l||""))}c=Array.filter(b,function(a){return!!a})}else c=[e];a&&(y.data=c,y.type="suggests:getSuggestWords:AFTER",!1!==this.fireTrigger(y)&&(c=y.data));return c},_getSuggestReplacement:function(a){var b=
this.opts,c=b.multiSuggests,d,e="",g,e=this.$Input,h=e.val(),l,m,n,q,t,v,y,u=null,A,C,K,L,M;if(c){d=this.__prevSuggest.caret||k.getCaretPosition(e[0]);if(!d)return;e=d.start;g=d.end;if(!this.__prevSuggest.caret){c=b.suggestSeparator;n=0;K=(C=b.suggestEscapeStart)&&b.suggestEscapeEnd;b=F.call(h,c);c=RegExp(c.source,(c.global?"g":"")+(c.ignoreCase?"i":"")+(c.multiline?"m":""));q=b.length;for(t=0;t<q;++t){v=b[t];(y=c.exec(h))&&(y=y[0]);if(C&&v)if(null!=u)K.test(v)&&(n=b.slice(0,u).join("").length,v=
b.slice(u,t+1).join(""),u=null);else if(-1!=(A=v.search(C))&&-1==v.substr(A+1).search(K))u=t;v=v.length;if((n+=v)>=e)if(null==u){e=n-v;g=n;break}else L||(L=n-v,M=n);y&&(n+=y.length);C&&y&&(b[t]+=y)}null!=u&&(e=L,g=M);d.start=e;d.end=g;this.__prevSuggest.caret=d}a?d=null:(l=h.substring(0,e),m=h.substring(g,h.length));return{position:d,start:e,end:g,value:h,leftPart:l,rightPart:m}}return null},_findValue:function(a,b,c,d){var e=void 0===a,g=this.opts,h=this.$Input,l,m,n,q;b||(b=this._getSuggestReplacement(e));
if(null===a&&(a=this.__val,null==a))return;b?(l=b.value,m=b.position,n=b.start,q=b.end,e?a=l.substring(n,q):(l=b.leftPart,b=b.rightPart,l=l+a+b,q=m.end=m.start+a.length)):e?a=h.val():g.searchLast||(l=a);l=g[e?"getSuggest":"setSuggest"].call(this,a,l,g,n,q);if(e)return this.__prevSuggest.val=l;this.val(l);void 0==q&&(q=l.length);Infinity==c&&(c=l.length);Infinity==d&&(d=l.length);k.setCaretPosition(h[0],void 0!=c?c:q,void 0!=d?d:q)},find:function(a,b){var d=this.opts,e=d.ajaxUrl;d.needUpdateValue&&
(d.needUpdateValue=!1,a=this._findValue());if(!b&&(!e||!a&&0<d.minLength))this.hide();else if(this._loadVal!=a||this._loadUrl!=e)this._loadUrl=e,this._loadVal=a,d.onsearch.call(this,a,this),this._request(e.replace("#query#",d.encodeBeforeSend?c(a):a)+"&"+Math.random(),this._loaded.bind(this,a),a)},set:function(a,b,c){this.opts[a]=b;"ajaxUrl"==a&&(this._cache=[],this.__val="");c||this.find(this.val());return this},get:function(a){return this.opts[a]},reset:function(){var a=this._loadVal,b=this._cache[a];
this.__val=this._loadVal=void 0;this._cache={};this.isExpanded()&&b&&(this._cache[a]=b)},show:function(a){this._rebuild(a||this.val())},hide:function(a){this._down=!1;if(!1===this._onExpand(!1,null,a))return!1;this.__currentMarkedChangeValue=null;this.$Suggest.hide();this._delayedHideEnd();clearTimeout(this._tid)},showSuggests:function(a,b,c,d){b&&void 0!=a&&this.val(a);void 0===a&&(a=this.val());void 0===c&&(c=this._cache[a]);d&&(this.$Input.attr("data-prevent-event-focus",1),this.$Input[0].focus(),
this.val(),this.blurred=!1);clearTimeout(this._tid);c?this._loaded(a,c,!0):this._tid=setTimeout(this.find.bind(this,a,!0),this.opts.timeout)},isExpanded:function(){return!0===this.__expandedState},_fetchMore:function(a,b){if(!this.opts.fetching)return!1;void 0===a&&(a=1);var c=this.__val,d=this._cache[c],e=(d&&d.length||0)-1,g=0<=e?this.__ListItems[e]:null;if(!g||!d||d.EOF)return!1;d={type:"suggests:fetch",fetchFrom:e,fetchCount:this.opts.fetchCount,fetchDirection:0>a?"UP":"DOWN",data:d,findValue:c,
EOF:!1,async:!1,currentDataLength:d.length,insertAfter:g};d.val=c;d.suggestValue=c;if(!1!=(c=this.fireTrigger(d)))!0!==d.async?(this[d.type](d,b),this.__inFetching=!1):this._asynchMarkers[d.type]?d.async=!1:(this._asynchMarkers||(this._asynchMarkers={}),d._asynchMarker=this._asynchMarkers[d.type]=+new Date,d._next_callback=b,d.next=this._callTriggerFunctionAsync,this.__inFetching=!d.EOF);return c},_fetchOnScroll:function(){if(this.isExpanded()&&!this.__inFetching){var a=this.$List[0];a.offsetHeight+
a.scrollTop+20>a.scrollHeight&&this._fetchMore()}},"suggests:fetch":function(a,b){var c=a.currentDataLength,d=a.insertAfter,e=a.suggestValue,g,h;b=b||a._next_callback;g=this._cache[e]=a.data;if(g.length==c||a.EOF)a.EOF=g.EOF=!0;if(g.EOF||!d&&!(d=this.__ListItems[a.fetchFrom]))h=a.result=!1;!1!==h&&(this._rebuild(e,a.fetchFrom,a.fetchCount,d),b&&b());this.__inFetching=!1;return h},getCurrentFindValue:function(){return this.__val},_hideIfNotActiveInput:function(){this._down=!1;v.activeElement!=this.$Input[0]&&
this.hide()},_delayedHideStart:function(){this.__delayedHide=setTimeout(this._hideIfNotActiveInput.bind(this),500)},_delayedHideEnd:function(){this.__delayedHide&&(clearTimeout(this.__delayedHide),this.__delayedHide=null)},_onMouseWheel:function(a){var b=a.wheelDelta||-1*a.detail;if(b){var c=a.currentTarget,d=c.scrollTop,e=c.scrollHeight,c=c.clientHeight;if(0<b?0==d:e<=c+d)a.preventDefault(),a.stopPropagation()}},_onScroll:function(){this._down=!1;this._delayedHideEnd()}});q.prototype.getSuggestWords=
q.prototype.getFindWords;n.ui.suggest=q}(document,this.ajs,this.ajs.$);
